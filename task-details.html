<!DOCTYPE html>
<html manifest="manifest.appcache">
  <head>
    <title>Task Manager</title>
    <link rel="shortcut icon" href="favicon.png" type="image/png"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="modules/themes/taskman-theme.css">
    <link rel="stylesheet" href="modules/themes/jquery.mobile.icons.min.css">
    <link rel="stylesheet" href="lib/jqm/jquery.mobile.structure-1.4.0.min.css">
    <link rel="stylesheet" href="modules/taskman.css">
    <link rel="stylesheet" href="modules/collapsible-listview.css">
    <link rel="stylesheet" href="lib/jquery.mobile.datepicker/jquery.mobile.datepicker.css">
  </head>
  <body class="initHandler">
    <div data-role="page" id="task-details-page">

      <div data-role="header" data-position="fixed">
        <a href="#" data-role="button" data-rel="back"
          data-icon="arrow-l" data-mini="true"
          data-i18n="header.back">
          Back
        </a>
        <h2 data-i18n="header.details">
          Details
        </h2>
      </div><!-- /header -->

      <div data-role="content">
        <div id="task-details-container"></div>
      </div><!-- /content -->

      <div data-role="footer" data-position="fixed">

        <div data-role="navbar" data-iconpos="left">
          <ul>
            <li>
              <a href="index.html"
                 class="ui-btn-active"
                 data-i18n="navbar.tasks">
                Tasks
              </a>
            </li>
            <li>
              <a href="projects.html"
                 data-i18n="navbar.projects">
                Projects
              </a>
            </li>
            <li>
              <a href="settings.html" data-icon="gear"
                 data-i18n="navbar.settings">
                Settings
              </a>
            </li>
          </ul>
        </div><!-- /navbar -->

      </div><!-- /footer -->

      <script id="task-details-template" type="text/x-handlebars-template">
        <form>
          <input type="hidden" id="task-id" value="{{task._id}}" />

          <div data-role="fieldcontain">
            <label for="task-title" data-i18n="details.title">
              Title:
            </label>
            <input type="text" name="title" id="task-title" value="{{task.title}}" />
          </div>

          <div data-role="fieldcontain">
            <label for="task-start" data-i18n="details.start">
              Begin date:
            </label>
            <input type="{{dateinput_type}}" name="start" id="task-start" data-role="date" value="{{asYMD task.start}}" />
          </div>

          <div data-role="fieldcontain">
            <label for="task-stop" data-i18n="details.stop">
              End date:
            </label>
            <input type="{{dateinput_type}}" name="stop" id="task-stop" data-role="date" value="{{asYMD task.stop}}" />
          </div>

          <div data-role="fieldcontain">
            <label for="task-project" class="select"
                  data-i18n="details.project">
              Project:
            </label>
            <select name="project-select" id="task-project" data-role="select">
              {{#projects}}
              <option value="{{this.project}}">{{this.project}}</option>
              {{/projects}}
            </select>
          </div>

          <div data-role="fieldcontain">
            <label for="task-state" class="select"
                  data-i18n="details.state">
              State:
            </label>
            <select name="state-select" id="task-state" data-role="select">
              {{#states}}
              <option value="{{this.state}}">{{t this.state}}</option>
              {{/states}}
            </select>
          </div>

          <div data-role="fieldcontain">
            <label for="task-description" data-i18n="details.description">
                Description:
            </label>
            <textarea name="description" id="task-description">{{task.description}}</textarea>
          </div>

          <div data-role="fieldcontain">
            {{#if task._id}}
            <a href="#" data-role="button"
              id="task-delete"
              data-icon="delete"
              data-inline="true"
              data-i18n="details.delete">
              Delete
            </a>
            {{else}}
            <a href="#" data-role="button"
              data-rel="back"
              data-icon="cancel"
              data-inline="true"
              data-i18n="details.cancel">
              Cancel
            </a>
            {{/if}}
            <a href="#" data-role="button"
              id="task-save"
              data-icon="check"
              data-inline="true"
              data-i18n="details.save">
              Save
            </a>
          </div>

        </form>
      </script>
    </div><!-- /page -->

    <script src="lib/jquery/jquery-1.10.2.js"></script>
    <script src="lib/jquery.mobile.datepicker/jquery.ui.datepicker.js"></script>
    <script src="lib/jio/sha256.amd.js"></script>
    <script src="lib/jio/rsvp-custom.js"></script>
    <script src="lib/jio/jio.js"></script>
    <script src="lib/jio/complex_queries.js"></script>
    <script src="lib/jio/storage/localstorage.js"></script>
    <script src="lib/jio/storage/davstorage.js"></script>
    <script src="lib/jio/storage/querystorage.js"></script>
    <script src="lib/moment/moment-2.5.0.js"></script>
    <script src="lib/jio/jiodate.js"></script>
    <script src="lib/js-logger/logger.js"></script>
    <script src="lib/handlebars/handlebars-v1.1.2.js"></script>
    <script src="lib/i18next/i18next-1.7.1.min.js"></script>
    <script src="modules/task-data.js"></script>
    <script src="modules/taskman.js"></script>
    <script src="lib/jqm/jquery.mobile-1.4.0.min.js"></script>
    <script src="lib/jquery.mobile.datepicker/jquery.mobile.datepicker.js"></script>
    <script src="lib/sanitize/sanitize.js"></script>

  </body>
</html>
