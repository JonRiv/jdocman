<!DOCTYPE html>
<html manifest="manifest.appcache">
  <head>
    <title>Task Manager</title>
    <link rel="shortcut icon" href="favicon.png" type="image/png"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="modules/themes/taskman-theme.css">
    <link rel="stylesheet" href="modules/themes/jquery.mobile.icons.min.css">
    <link rel="stylesheet" href="lib/jqm/jquery.mobile.structure-1.4.0.min.css">
    <link rel="stylesheet" href="modules/taskman.css">
    <link rel="stylesheet" href="modules/collapsible-listview.css">
    <link rel="stylesheet" href="lib/jquery.mobile.datepicker/jquery.mobile.datepicker.css">
    <link rel="stylesheet" href="lib/jquery-te/jquery-te-1.4.0.css">
  </head>
  <body class="initHandler">
    <div data-role="page" id="projects-page">

      <div data-role="header" data-position="fixed">
        <a href="#" data-role="button" data-rel="back"
          data-icon="arrow-l" data-mini="true"
          data-i18n="header.back">
          Back
        </a>
        <h2 data-i18n="header.projects">
          Projects
        </h2>
      </div><!-- /header -->

      <div data-role="content">
        <div id="project-list-container"></div>
      </div><!-- /content -->

      <div data-role="footer" data-position="fixed">

        <div data-role="navbar" data-iconpos="left">
          <ul>
            <li>
              <a href="index.html"
                 data-i18n="navbar.tasks">
                Tasks
              </a>
            </li>
            <li>
              <a href="projects.html"
                 class="ui-btn-active"
                 data-i18n="navbar.projects">
                Projects
              </a>
            </li>
            <li>
              <a href="settings.html" data-icon="gear"
                 data-i18n="navbar.settings">
                Settings
              </a>
            </li>
          </ul>
        </div><!-- /navbar -->

      </div><!-- /footer -->

      <script id="project-list-template" type="text/x-handlebars-template">

        <ul data-role="listview" class="ui-listview-outer" data-inset="true">
          {{#each tasks}}
          <li data-role="collapsible" data-iconpos="right" data-inset="false">
            <h2>{{@key}} <span class="ui-li-count">{{this.task_count}}</span></h2>
            {{#if this.task_count}}
            <ul data-role="listview" class="task-listview">
              {{#each this.tasks}}
              <li>
                <a href="#" data-jio-id="{{_id}}" class="task-details-link">
                  {{title}}
                  <p>{{sanitize description}}</p>
                  <p>
                    <span class="state">{{t state}}</span>
                    {{t "tasks.from"}}
                    <span class="from-date">{{asYMD start}}</span>
                    {{t "tasks.to"}}
                    <span class="to-date">{{asYMD stop}}</span>
                  </p>
                </a>
              </li>
              {{/each}}
            </ul>
            {{/if}}
          </li>
          {{/each}}
        </ul>
      </script>
    </div><!-- /page -->

    <script src="lib/jquery/jquery-1.10.2.js"></script>
    <script src="lib/jquery.mobile.datepicker/jquery.ui.datepicker.js"></script>
    <script src="lib/jio/sha256.amd.js"></script>
    <script src="lib/jio/rsvp-custom.js"></script>
    <script src="lib/jio/jio.js"></script>
    <script src="lib/jio/complex_queries.js"></script>
    <script src="lib/jio/storage/localstorage.js"></script>
    <script src="lib/jio/storage/davstorage.js"></script>
    <script src="lib/moment/moment-2.5.0.js"></script>
    <script src="lib/jio/jiodate.js"></script>
    <script src="lib/js-logger/logger.js"></script>
    <script src="lib/handlebars/handlebars-v1.1.2.js"></script>
    <script src="lib/i18next/i18next-1.7.1.min.js"></script>
    <script src="modules/task-util.js"></script>
    <script src="modules/task-data.js"></script>
    <script src="modules/taskman.js"></script>
    <script src="lib/jqm/jquery.mobile-1.4.0.min.js"></script>
    <script src="lib/jquery.mobile.datepicker/jquery.mobile.datepicker.js"></script>
    <script src="lib/jquery-te/jquery-te-1.4.0.min.js"></script>
    <script src="lib/sanitize/sanitize.js"></script>
    <script src="lib/sanitize/relaxed.js"></script>

  </body>
</html>
